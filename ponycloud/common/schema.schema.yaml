%YAML 1.2
---
title: PonyCloud Database Model
type: object

patternProperties:
  '.*':
    title: Table
    type: object

    required:
      - owner
      - parents
      - pkey

    properties:
      owner:
        title: Owner Relation
        description: Name of the local column and a remote table.
          Rows in the remote table "own" matching rows in the local table.
          This information is critical for correct access control.

        type: ['null', 'array']
        minItems: 2
        maxItems: 2
        items:
          &String
            type: string

      parents:
        title: Parent Relation
        description: Array of local column and remote table names that can
          be used to determine how to reach child rows from parent rows.
          This information is used to form the tree-like RESTful API.

        type: array
        items:
          type: array
          minItems: 2
          maxItems: 2
          items: *String

      pkey:
        title: Primary Key
        description: Name of the primary key column of the table.
        type: string

      public:
        title: Public
        description: Tables without an owner, marked as public are readable
          by anyone. Others are restricted to administrators.
        type: boolean

